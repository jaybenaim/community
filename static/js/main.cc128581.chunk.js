(window.webpackJsonpcommunity_front=window.webpackJsonpcommunity_front||[]).push([[0],{100:function(e,t,a){e.exports=a(187)},105:function(e,t,a){},183:function(e,t,a){},184:function(e,t,a){},187:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(22),o=a.n(l),i=(a(105),a(6)),s=a(7),c=a(9),m=a(8),u=a(10),d=(a(47),a(97)),h=a(27),p=a(34),f=a.n(p),g=a(15),E=a.n(g),v=a(18),b=a.n(v),w=a(23),y=a.n(w),C=a(38),S=a.n(C),I=a(95),P=a.n(I),O=(a(61),a(31));function j(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var k=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.handle_change=function(e){var t=e.target.name,n=e.target.value;a.setState(function(e){var a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?j(a,!0).forEach(function(t){Object(O.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e);return a[t]=n,a})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:function(t){return e.props.handle_login(t,e.state)}},r.a.createElement("h4",null,"Log In"),r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handle_change}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handle_change}),r.a.createElement("input",{type:"submit"}))}}]),t}(r.a.Component);function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var _=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},a.handle_change=function(e){var t=e.target.name,n=e.target.value;a.setState(function(e){var a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach(function(t){Object(O.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e);return a[t]=n,a})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("form",{onSubmit:function(t){return e.props.handle_signup(t,e.state)}},r.a.createElement("h4",null,"Sign Up"),r.a.createElement("label",{htmlFor:"username"},"Username"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handle_change}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handle_change}),r.a.createElement("input",{type:"submit"}))}}]),t}(r.a.Component),F=a(11),A=a.n(F),T=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).logged_out_nav=r.a.createElement("div",{className:"center"},r.a.createElement("ul",null,r.a.createElement("li",{className:"btn btn-primary login",onClick:function(){return a.props.display_form("login")}},"login"),r.a.createElement("li",{className:"btn btn-primary signup",onClick:function(){return a.props.display_form("signup")}},"signup"))),a.logged_in_nav=r.a.createElement(A.a,{className:"logout-btn",onClick:a.props.handle_logout,size:"sm"},"logout"),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e;switch(this.props.displayed_form){case"login":e=r.a.createElement(k,{handle_login:this.props.handle_login});break;case"signup":e=r.a.createElement(_,{handle_signup:this.props.handle_signup});break;default:e=null}return r.a.createElement(y.a,null,r.a.createElement(E.a,null,this.props.loggedIn?this.logged_in_nav:this.logged_out_nav,e,r.a.createElement("h3",null,this.props.loggedIn?"Hello, ".concat(window.localStorage.username&&window.localStorage.username.toUpperCase()):"Please Log In")))}}]),t}(r.a.Component),x=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.navClass,a=e.loggedIn,n=e.display_form,l=e.handle_logout,o=e.username,i=e.displayed_form,s=e.handle_login,c=e.handle_signup,m=e.userProfile;return r.a.createElement(S.a,{className:t,expand:"lg"},r.a.createElement(S.a.Brand,{href:"/"},r.a.createElement("img",{className:"logo",src:P.a,alt:"logo"}),r.a.createElement("span",{className:"company-name"},"\xa0 COMMUNITY")),r.a.createElement(S.a.Toggle,{"aria-controls":"nav-toggle"}),r.a.createElement(S.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(f.a,{className:"mr-auto"},r.a.createElement(f.a.Link,{href:"/"},"Home"),r.a.createElement(f.a.Link,{href:"/map"},"Map"),r.a.createElement(f.a.Link,{href:"/profiles/myprofile"},"My Profile"),r.a.createElement(f.a.Link,{href:"/profiles/search"},"My Community"),r.a.createElement(y.a,null,r.a.createElement(E.a,null,r.a.createElement(b.a,{sm:6,md:6,lg:6},r.a.createElement("div",{className:"login-display"},r.a.createElement(T,{loggedIn:a,display_form:n,handle_logout:l,username:o,displayed_form:i,handle_login:s,handle_signup:c,userProfile:m}))))))))}}]),t}(r.a.Component),B=function(){return r.a.createElement("div",{className:"image-slider"},r.a.createElement("ul",{className:"slideshow"},r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null),r.a.createElement("li",null)))},R=a(32),U=a.n(R),D=U.a.create({baseURL:"http://localhost:8000/api/"}),W=a(33),M=a(43),L=a(44),G=a.n(L),z="test",q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).getProfileAddresses=function(){D.get("profiles/").then(function(e){e.data.length<e.data.length-1&&a.setState({users:e.data})})},a.checkGeocodeLoading=function(e){var t=a.props.allProfiles;console.log(e+t.length),e===t.length-1?a.setState({loading:!1}):e===t.length-1&&0!==parseInt(e)&&1!==e&&a.setState({loading:!0})},a.initializeGeocode=function(){var e=G.a.setApiKey,t=G.a.enableDebug;e(z),t()},a.getGeocodeFromAddress=function(e){G.a.fromAddress(e.toString()).then(function(e){var t=e.results[0].geometry.location,n=t.lat,r=t.lng,l=a.state.geocodes;a.setState({geocodes:[].concat(Object(W.a)(l),[{lat:n,lng:r}])})})},a.mapStyles={width:"100%",height:"100%"},a.displayMarkers=function(){return a.state.geocodes.map(function(e,t){return r.a.createElement(M.Marker,{key:t,id:t,position:{lat:e.lat,lng:e.lng}})})},a.state={geocodes:[],center:{lat:43.671593898745726,lng:-79.37341993487492},zoom:10,loading:!1,users:[]},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.initializeGeocode(),this.props.handleNavClassChange();var t=this.props.allProfiles;!this.state.loading&&t.forEach(function(t,a){var n=t.address;e.checkGeocodeLoading(a),e.getGeocodeFromAddress(n)})}},{key:"render",value:function(){var e=this.state,t=e.center;return e.loading?r.a.createElement("div",null,"Loading ... "):r.a.createElement("section",{style:{height:"100vh",width:"100%"}},r.a.createElement(M.Map,{google:this.props.google,zoom:13,style:this.mapStyles,initialCenter:t,centerAroundCurrentLocation:!0},this.displayMarkers()))}}]),t}(n.Component),H=Object(M.GoogleApiWrapper)({apiKey:z})(q),Q=(a(51),a(60)),J=a(14),K=a.n(J),V=a(4),Y=a.n(V),$=function(e){var t=e.handleItem,a=e.userProfile,l=e.toggleAddItemForm,o=Object(n.useState)(null),i=Object(Q.a)(o,2),s=i[0],c=i[1],m=Object(n.useState)(null),u=Object(Q.a)(m,2),d=u[0],h=u[1],p=r.a.createRef(),f=r.a.createRef();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(K.a.Dialog,null,r.a.createElement(K.a.Header,null,r.a.createElement(K.a.Title,null,"Item Form")),r.a.createElement(K.a.Body,null,r.a.createElement(Y.a,null,r.a.createElement(Y.a.Group,{controlId:"formBasicName"},r.a.createElement(Y.a.Label,null,"Item"),r.a.createElement(Y.a.Control,{name:"item",type:"text",ref:p,placeholder:"Enter An Item Name"})),r.a.createElement(Y.a.Group,{controlId:"formBasicName"},r.a.createElement(Y.a.Label,null,"Price"),r.a.createElement(Y.a.Control,{name:"price",type:"text",ref:f,placeholder:"Enter An Item Price"})))),r.a.createElement(K.a.Footer,null,r.a.createElement(A.a,{variant:"secondary",onClick:function(e){l(e)}},"Close"),r.a.createElement(A.a,{variant:"primary",onClick:function(e){e.preventDefault();var n=p.current.value,r=f.current.value;c(n),h(r),setTimeout(function(){t(n,r)},1e3),D.post("items/",{profile_id:a[0].id,name_of_item:n,price:r,available:!0},{headers:{"Content-Type":"application/json",Authorization:"Token ".concat(window.localStorage.token)}}).then(function(e){t(s,d),alert("Item Successfully Added! ")}).catch(function(e){alert("Something Went Wrong"),console.log(e)})}},"Save changes")))))},X=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).nameRef=r.a.createRef(),a.emailRef=r.a.createRef(),a.addressRef=r.a.createRef(),a.state={show:!1},a.handleShow=function(){a.setState({show:!a.state.show})},a.handleProfileFormClick=function(e){var t=a.nameRef.current.value,n=a.emailRef.current.value,r=a.addressRef.current.value;console.log(window.localStorage.token),D.post("profiles/",{user:Number(window.localStorage.id),username:window.localStorage.username,profile_name:t,email:n,address:r},{headers:{"Content-Type":"application/json",Authorization:"Token ".concat(window.localStorage.token)}}).then(function(e){a.handleShow(),console.log("POST Status: "+e.statusText)}).catch(function(e){alert("Something went wrong, try signing up or loggin in first."),console.log("POST Status: "+e)})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(y.a,{className:"grid-container"},r.a.createElement(A.a,{className:"butoon",variant:"primary",onClick:this.handleShow},"Create a Profile"),r.a.createElement(K.a,{className:"modal-form",show:this.state.show},r.a.createElement(K.a.Header,null,r.a.createElement(K.a.Title,{name:"someValue"},"Create a Profile ")),r.a.createElement(K.a.Body,null,r.a.createElement(Y.a,null,r.a.createElement(Y.a.Group,{controlId:"formBasicName"},r.a.createElement(Y.a.Label,null,"Profile Name"),r.a.createElement(Y.a.Control,{name:"name",ref:this.nameRef,type:"name",placeholder:"Enter Profile Name"})),r.a.createElement(Y.a.Group,{controlId:"formBasicEmail"},r.a.createElement(Y.a.Label,null,"Email"),r.a.createElement(Y.a.Control,{name:"email",ref:this.emailRef,type:"email",placeholder:"Enter Email"})),r.a.createElement(Y.a.Group,{controlId:"formBasicAddress"},r.a.createElement(Y.a.Label,null,"Address"),r.a.createElement(Y.a.Control,{name:"address",ref:this.addressRef,type:"text",placeholder:"Enter Address"})))),r.a.createElement(K.a.Footer,null,r.a.createElement(A.a,{onClick:this.handleShow,variant:"secondary"},"Close"),r.a.createElement(A.a,{variant:"primary",onClick:this.handleProfileFormClick},"Save changes"))))}}]),t}(r.a.Component),Z=(a(183),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).submitEditForm=function(e){console.log("sumbit form clicked, not implemented"),a.props.toggleEditForm(e)},a.closeEditForm=function(e){console.log("close button clicked"),a.props.toggleEditForm(e)},a.state={username:e.username||"",profile_name:e.profile_name||"",email:e.email||"",address:e.address||""},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement(K.a.Dialog,null,r.a.createElement(K.a.Header,{closeButton:!0,onClick:this.closeEditForm},r.a.createElement(K.a.Title,null,"Edit your Profile")),r.a.createElement(K.a.Body,null,r.a.createElement(Y.a,null,r.a.createElement(Y.a.Group,{controlId:"formBasicName"},r.a.createElement(Y.a.Label,null,"Profile Name (optional)"),r.a.createElement(Y.a.Control,{name:"price",type:"text",placeholder:"Modify your Profile Name"})),r.a.createElement(Y.a.Group,{controlId:"formBasicName"},r.a.createElement(Y.a.Label,null,"E-mail (optional)"),r.a.createElement(Y.a.Control,{name:"price",type:"text",placeholder:"Modify your E-mail"})),r.a.createElement(Y.a.Group,{controlId:"formBasicName"},r.a.createElement(Y.a.Label,null,"Address (optional)"),r.a.createElement(Y.a.Control,{name:"price",type:"text",placeholder:"Modify your Address"})))),r.a.createElement(K.a.Footer,null,r.a.createElement(A.a,{variant:"secondary",onClick:this.closeEditForm},"Close"),r.a.createElement(A.a,{variant:"primary",onClick:this.submitEditForm},"Save changes")))))}}]),t}(n.Component)),ee=a(35),te=(a(184),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={time:[],sender:a.props.sender,senderClass:"client"===a.props.sender?"rcw-client-time":"rcw-response-time"},a.getTime=function(){var e=a.props.messageTime.split(":");e.pop();var t="",n="";e[0]<12?t="AM":e[0]>12&&(e[0]=e[0]-12,t=" PM",n=e.join(":"),n+=t),a.setState({time:[].concat(Object(W.a)(a.state.time),[n])})},a.componentDidMount=function(){a.getTime()},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:this.state.senderClass},r.a.createElement("div",null," ",this.state.time[0]))}}]),t}(r.a.Component)),ae=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={messageId:null,messages:[],title:"Chatting with ".concat(a.props.title)||!1,subtitle:"Welcome"},a.handleNewUserMessage=function(e){var t=a.props,n=(t.userProfile,t.userWhoBorrowedId),r=t.currentUserProfile[0],l=(r.id,r.user);D.post("messages/",{text:e,sending_user:l,recieving_user:n},{headers:{"Content-Type":"application/json",Authorization:"Token ".concat(window.localStorage.token)}}).then(function(e){console.log("message sent"),a.setState({messageId:e.data.id})}).catch(function(e){console.log(e)})},a.checkIfUserHasMessagesPending=function(){var e=a.props,t=(e.userProfile,e.userWhoBorrowedId),n=e.currentUserProfile[0].user;D.get("messages/").then(function(e){e.data.filter(function(e){if(e.recieving_user===n&&e.sending_user===t){var a={messageTime:e.time,sender:"server"};Object(ee.addResponseMessage)(e.text),Object(ee.renderCustomComponent)(te,a)}else if(e.recieving_user===t&&e.sending_user===n){var r={messageTime:e.time,sender:"client"};Object(ee.addUserMessage)(e.text),Object(ee.renderCustomComponent)(te,r)}})})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.checkIfUserHasMessagesPending()}},{key:"render",value:function(){return r.a.createElement(K.a,{onHide:function(){return!1},className:"modal-form",show:this.props.chatShow},r.a.createElement(K.a.Header,null,r.a.createElement(K.a.Title,{name:"someValue"},this.state.title)),r.a.createElement(K.a.Body,null,r.a.createElement(ee.Widget,{handleNewUserMessage:this.handleNewUserMessage,title:this.state.title,subtitle:this.state.subtitle}),r.a.createElement(A.a,{onClick:this.props.handleChatToggle},"Close")))}}]),t}(n.Component),ne=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={userWhoRequestedItem:[],userWhoBorrowedId:null,chatShow:!1},a.resetItemAvailability=function(e){var t=a.props,n=t.id,r=t.userProfile;D.patch("items/".concat(n,"/"),{profile_id:r[0].id,user_who_borrowed:null,available:!0},{headers:{"Content-Type":"application/json",Authorization:"Token ".concat(window.localStorage.token)}}).catch(function(e){alert("Error")})},a.getUserWhoRequestedItemsProfile=function(){var e=a.props,t=e.userWhoBorrowed,n=e.name;t&&D.get("profiles/".concat(t,"/")).then(function(e){var t=e.data;a.setState({userWhoRequestedItem:Object(O.a)({},n,t.profile_name),userWhoBorrowedId:t.user})})},a.deleteItem=function(){var e=a.props.id;D.delete("items/".concat(e,"/"),{headers:{"Content-Type":"application/json",Authorization:"Token ".concat(window.localStorage.token)}}).then(function(e){alert("Item Succesfully Deleted")}).catch(function(e){alert("Something went wrong")})},a.componentDidMount=function(){a.getUserWhoRequestedItemsProfile()},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.price,n=e.userWhoBorrowed,l=e.handleChatToggle,o=e.userProfile,i=e.chatShow;return r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4"}),this.state.userWhoRequestedItem[t]?r.a.createElement("td",{colSpan:"4"},r.a.createElement(A.a,{variant:"outline-info",onClick:l},"Chat"),r.a.createElement(ae,{currentUserProfile:o,userWhoBorrowedName:this.state.userWhoRequestedItem[t],userWhoBorrowedId:this.state.userWhoBorrowedId,chatShow:i,handleChatToggle:l,title:this.state.userWhoRequestedItem[t]})):r.a.createElement("td",{colSpan:"4"}),r.a.createElement("td",null,t.toUpperCase()),r.a.createElement("td",null,"\xa0\xa0",a.toUpperCase(),"\xa0\xa0"),n?r.a.createElement("td",null,this.state.userWhoRequestedItem[t]," Requested to borrow this item"):r.a.createElement("td",null,"This item is available for borrow"),n?r.a.createElement("td",null,r.a.createElement(A.a,{className:"btn reset-item-availablity",variant:"outline-primary",onClick:this.resetItemAvailability},"Reset Item Availablity")):r.a.createElement("td",null,r.a.createElement(A.a,{className:"item-delete-btn",variant:"outline-danger",onClick:this.deleteItem},"Delete Item")),r.a.createElement("td",{colSpan:"4"}))}}]),t}(r.a.Component),re=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:[],items:[],urls:[],profileImage:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png",itemGif:"",image:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png",itemName:"",matchedChatProfile:[],showEditForm:!1,showAddItemForm:!1,loading:!0},a.getItemsFromUser=function(){var e=a.props.userProfile;console.log(e),D.get("items/").then(function(t){var n=t.data;void 0!==e[0]&&a.setState({items:n.filter(function(t){if(t.profile_id===e[0].id)return t})})})},a.changeImage=function(){var e=prompt("Enter a url");a.setState({profileImage:e})},a.toggleEditForm=function(e){return e.preventDefault(),console.log("clicked"),!1===a.state.showEditForm?a.setState({showEditForm:!0}):a.setState({showEditForm:!1})},a.toggleAddItemForm=function(e){return e.preventDefault(),console.log("Add Item Form Clicked!"),a.state.showEditForm,a.setState({showAddItemForm:!a.state.showAddItemForm})},a.componentDidMount=function(){a.props.handleNavClassChange(),setTimeout(function(){a.getItemsFromUser()},1e3)},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e,t,a=this.state.items,n=this.props,l=n.chatShow,o=n.handleChatToggle,i=n.getProfileFromToken,s=n.userProfile,c=n.chatWidget,m=a.map(function(e,t){var a=e.id,n=e.name_of_item,i=e.price,m=e.available,u=e.user_who_borrowed;return r.a.createElement(ne,{key:t,id:a,name:n,price:i,available:m,userProfile:s,userWhoBorrowed:u,chatWidget:c,handleChatToggle:o,chatShow:l})});return void 0===this.props.userProfile[0]?e=r.a.createElement(X,{loadProfile:i,userProfile:s,getProfile:this.getProfile}):t=r.a.createElement(y.a,{className:"cont"},r.a.createElement(E.a,null,r.a.createElement(b.a,{xs:12,md:12,lg:4,className:"con"},r.a.createElement("section",null,r.a.createElement("img",{className:"profile-image",src:this.state.profileImage,alt:"profile",onClick:this.changeImage}),r.a.createElement("div",{className:"profile-details"},r.a.createElement(E.a,null,r.a.createElement("p",{className:"profile-name"},s[0].profile_name||null)),r.a.createElement("br",null),r.a.createElement(E.a,null,r.a.createElement("p",{className:"profile-email"},r.a.createElement("span",{className:"bold"}," Email:")," ",s[0].email),r.a.createElement("br",null)),r.a.createElement(E.a,null,r.a.createElement("p",{className:"profile-address"},r.a.createElement("br",null),r.a.createElement("span",{className:"bold"}," Address: "),r.a.createElement("a",{href:"/map"}," ",s[0].address))),r.a.createElement(A.a,{className:"add-item-button",variant:"primary",onClick:this.toggleAddItemForm},"Add Item")),this.state.showAddItemForm&&r.a.createElement($,{toggleAddItemForm:this.toggleAddItemForm,itemName:this.state.itemName,handleItemClose:this.handleItemClose,onChangeItemPrice:this.onChangeItemPrice,onChangeItemName:this.onChangeItemName,handleFormSubmit:this.handleFormSubmit,displayItemForm:this.displayItemForm,handleItem:this.props.handleItem,userProfile:this.props.userProfile}))),r.a.createElement(b.a,{xs:12,md:12,lg:6,className:"profile-items"},r.a.createElement("strong",null,"Your Items"),r.a.createElement("table",{className:"item-owner-container"},r.a.createElement("tbody",{className:"item-owner-items"},m)))),r.a.createElement(A.a,{className:"edit-profile-button",variant:"primary",onClick:this.toggleEditForm},"\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0Edit\xa0Profile \xa0\xa0\xa0\xa0\xa0\xa0\xa0\xa0"),this.state.showEditForm&&r.a.createElement(Z,{toggleEditForm:this.toggleEditForm})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,e,t))}}]),t}(r.a.Component),le=a(58),oe=a.n(le),ie=(a(55),a(39)),se=a.n(ie),ce=a(42),me=a.n(ce),ue=a(96),de="test",he=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={itemAvailable:a.props.available,isActive:!a.props.available,buttonClass:a.props.available?"success":"danger",buttonText:a.props.available?"Item Available":"Item Unavailable",image:null,loading:!0},a.handleBorrowButton=function(){var e=a.props,t=e.id,n=e.userProfileId,r=(e.userProfile,e.currentUserProfile);D.patch("items/".concat(t,"/"),{profile_id:n,user_who_borrowed:r[0].id,available:!1},{headers:{"Content-Type":"application/json",Authorization:"Token ".concat(window.localStorage.token)}}).catch(function(e){alert("Item Not Available")})},a.setHeroImage=function(){var e=a.props.name;a.getGify(e)},a.getGify=function(){var e=Object(ue.a)(me.a.mark(function e(t){return me.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.get("https://api.giphy.com/v1/gifs/search?api_key=".concat(de,"&q=").concat(t,"&limit=1&offset=0&rating=G&lang=en")).then(function(e){var t=e.data.data[0].images.fixed_height.url,n=e.data.data[0].images.fixed_height_still.url;a.setState({image:t||n,loading:!1})}).catch(function(e){console.log(e)});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.setHeroImage(),console.log(localStorage.token)}},{key:"render",value:function(){return this.state.loading?r.a.createElement(E.a,null,"Loading ..."):r.a.createElement(E.a,{className:"item-card"},r.a.createElement("div",{className:"item-container"},r.a.createElement(E.a,{className:"item-square"},r.a.createElement(b.a,{className:"gif-container"},r.a.createElement("img",{className:"item-image",src:this.state.image,alt:"item"})),r.a.createElement(b.a,{className:"item-content item-name"},r.a.createElement("label",{htmlFor:"item name"},"Item Name"),r.a.createElement("div",null," ",this.props.name," ")),r.a.createElement(b.a,{className:"item-content item-price"},r.a.createElement("label",{htmlFor:"item price"},"Item Price"),r.a.createElement("div",null," ",this.props.price)),r.a.createElement(A.a,{className:"item-content borrow-button",variant:this.state.buttonClass,onClick:this.handleBorrowButton,disabled:this.state.isActive},this.state.buttonText))))}}]),t}(r.a.Component),pe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:[],items:[],urls:[],profileImage:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png",itemGif:"",image:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png",itemName:"",showEditForm:!1,showAddItemForm:!1,loading:!0},a.getItemsFromUser=function(){var e=a.props.userProfile;D.get("items/").then(function(t){var n=t.data;void 0!==e&&a.setState({items:n.filter(function(t){if(t.profile_id===e.id)return t})})})},a.changeImage=function(){var e=prompt("Enter a url");a.setState({profileImage:e})},a.toggleEditForm=function(e){return e.preventDefault(),console.log("clicked"),!1===a.state.showEditForm?a.setState({showEditForm:!0}):a.setState({showEditForm:!1})},a.toggleAddItemForm=function(e){return e.preventDefault(),console.log("Add Item Form Clicked!"),a.state.showEditForm,a.setState({showAddItemForm:!a.state.showAddItemForm})},a.handleNewUserMessage=function(e){var t=a.props,n=t.userProfile,r=t.userWhoBorrowedId,l=(n.id,n.user);D.post("messages/",{text:e,sending_user:l,recieving_user:r},{headers:{"Content-Type":"application/json",Authorization:"Token ".concat(window.localStorage.token)}}).then(function(e){console.log("message sent"),a.setState({messageId:e.data.id,user:n})}).catch(function(e){console.log(e)})},a.componentDidMount=function(){a.props.handleNavClassChange(),a.getItemsFromUser()},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.items,a=e.itemGif,n=e.image,l=this.props,o=l.userProfile,i=l.currentUserProfile,s=t.map(function(e,t){var l=e.id,s=e.name_of_item,c=e.price,m=e.available,u=e.profile_id;return r.a.createElement(he,{key:t,id:l,image:a||n,name:s,price:c,available:m,userProfileId:u,userProfile:o[0],currentUserProfile:i})});return r.a.createElement(y.a,{className:"cont"},"\xa0\xa0\xa0\xa0\xa0\xa0\xa0",r.a.createElement(E.a,null,r.a.createElement(b.a,{xs:12,md:12,lg:4,className:"con"},r.a.createElement("section",null,r.a.createElement("img",{className:"profile-image",src:this.state.profileImage,alt:"profile",onClick:this.changeImage}),r.a.createElement("div",{className:"profile-details"},r.a.createElement(E.a,null,r.a.createElement("p",{className:"profile-name"},o.profile_name||null)),r.a.createElement("br",null),r.a.createElement(E.a,null,r.a.createElement("p",{className:"profile-email"},r.a.createElement("span",{className:"bold"}," Email:")," ",o.email),r.a.createElement("br",null)),r.a.createElement(E.a,null,r.a.createElement("p",{className:"profile-address"},r.a.createElement("br",null),r.a.createElement("span",{className:"bold"}," Address: "),r.a.createElement("a",{href:"/map"}," ",o.address)))))),r.a.createElement(b.a,{xs:12,md:12,lg:6,className:"profile-items"},s,r.a.createElement(A.a,{variant:"outline-info",onClick:this.props.handleChatToggle},"Chat"),r.a.createElement(ae,{currentUserProfile:this.props.currentUserProfile,userProfile:this.props.userProfile,chatShow:this.props.chatShow,handleChatToggle:this.props.handleChatToggle,userWhoBorrowedId:o.user,title:o.profile_name}))))}}]),t}(r.a.Component),fe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(l)))).state={profileSearched:[],searchItem:null,searchResults:[],loading:!1,redirect:!1,loaded:!1,showSearchedProfile:!1,clickedProfile:[]},a.searchRef=r.a.createRef(),a.handleSearchQuery=function(){var e=a.searchRef.current.value;D.get("items/").then(function(t){var n=t.data||[];a.setState({searchResults:n.filter(function(t,n){if(t.name_of_item.toLowerCase()===e.toLowerCase())return a.getSearchProfile(t.profile_id),a.state.profileSearched})})}).catch(function(e){alert("No Item Found")})},a.getSearchProfile=function(e){try{var t=[];D.get("profiles/".concat(e,"/")).then(function(e){t.push(e.data),a.setState({profileSearched:[].concat(Object(W.a)(a.state.profileSearched),[e.data])})})}catch(n){alert("No Item Found")}},a.showProfilePageForSearchedUser=function(e){a.setState({showSearchedProfile:!0,clickedProfile:e,loaded:!0})},a.componentDidMount=function(){a.props.handleNavClassChange()},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;console.log(localStorage.token);var t=this.state,a=(t.showSearchedProfile,t.profileSearched),n=(t.searchResults,a.map(function(t,a){return r.a.createElement(E.a,{md:10,lg:10,className:"searched-cards-container"},r.a.createElement(se.a,{key:a,className:"searched-cards",style:{width:"12rem"}},r.a.createElement(se.a.Img,{variant:"top",src:"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png"}),r.a.createElement(se.a.Body,null,r.a.createElement(se.a.Title,null,t.profile_name),r.a.createElement(A.a,{variant:"primary",onClick:function(){return e.showProfilePageForSearchedUser(t)}},"Click to see ",t.profile_name,"'s profile"))))}));return r.a.createElement(r.a.Fragment,null,this.state.loaded?r.a.createElement(pe,{userProfile:this.state.clickedProfile,handleItem:this.props.handleItem,handleNavClassChange:this.props.handleNavClassChange,chatShow:this.props.chatShow,handleChatToggle:this.props.handleChatToggle,userWhoBorrowed:a.profileName,currentUserProfile:this.props.userProfile}):r.a.createElement(y.a,{sm:12,md:12,lg:12,fluid:!0,className:"grid-container"},r.a.createElement(E.a,null,r.a.createElement(b.a,{sm:12,md:12,lg:12},r.a.createElement(Y.a,{inline:!0,className:"search-bar-container"},r.a.createElement(oe.a,{type:"text",placeholder:"Search for an item",className:"mr-sm-2",ref:this.searchRef}),r.a.createElement(A.a,{variant:"primary",onClick:this.handleSearchQuery},"Search")),r.a.createElement(E.a,{className:"show-grid"},n)))))}}]),t}(n.Component),ge=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={user:[],userProfile:[],items:[],show:"false",showProfile:!1,displayItemForm:!1,itemName:"first name",itemPrice:"price",allProfiles:[],displayed_form:"",loggedIn:!!window.localStorage.token,username:"",searchItem:null,profileSearched:"",navClass:"nav navbar-light",loading:!1,chatShow:!1},a.handleNavClassChange=function(){a.setState({navClass:"nav navbar-dark"})},a.handleAddItemName=function(e){var t=e.target.value;a.setState({itemName:t})},a.handleAddItemPrice=function(e){var t=e.target.value;a.setState({itemPrice:t})},a.handleItemFormSubmit=function(e){e.preventDefault(),D.post("items/",{name_of_item:a.state.itemName.itemName,price:a.state.itemPrice.itemPrice,available:!0}).then(function(e){a.setState({displayItemForm:!1}),console.log("Item added")}).catch(function(e){alert("Error",e)})},a.handleAddItemToggle=function(e){e.preventDefault(),a.setState(function(e){return!e})},a.handleProfileFormSubmit=function(e){var t=e.profile_name,n=e.email,r=e.address;a.setState({name:t,email:n,address:r})},a.handleShowProfile=function(){a.setState({showProfile:!0})},a.handleClose=function(){a.setState({showProfile:!0})},a.handleShow=function(){a.setState({show:!0})},a.getAllProfiles=function(){D.get("profiles/",{headers:{"Content-Type":"application/json"}}).then(function(e){var t=e.data;a.setState({allProfiles:t})}).then(function(e){a.getProfileId()})},a.getAllItems=function(){return null},a.getProfileId=function(){var e=a.state.allProfiles;a.setState({userProfile:e.filter(function(e){if(e.user===Number(window.localStorage.id))return e})})},a.handle_login=function(e,t){e.preventDefault(),U.a.post("http://localhost:8000/authenticate/",t).then(function(e){window.localStorage.token=e.data.token,window.localStorage.username=t.username,window.localStorage.id=e.data.id}),a.getProfileId()},a.handle_signup=function(e,t){e.preventDefault(),D.post("users/",t,{headers:{"Content-Type":"application/json"}}).then(function(e){window.localStorage.token=e.data.token,window.localStorage.username=t.username,window.localStorage.id=e.data.id,a.getProfileId()})},a.handle_logout=function(e){e.preventDefault(),window.localStorage.token="",window.localStorage.username="",window.localStorage.id="",a.setState({loggedIn:!1})},a.display_form=function(e){a.setState({displayed_form:e})},a.handleItem=function(e,t){var n=[];n.push({item:e,price:t}),a.setState(function(e){return{items:n}})},a.handleChatToggle=function(){return a.setState({chatShow:!a.state.chatShow})},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.getAllProfiles(),this.getProfileId()}},{key:"render",value:function(){var e=this,t=this.state,a=t.userProfile,n=t.chatShow,l=r.a.createElement(ae,{userProfile:a,chatShow:n});return r.a.createElement(d.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",component:B})),r.a.createElement(h.c,null,r.a.createElement(x,{loggedIn:this.state.loggedIn,display_form:this.display_form,handle_logout:this.handle_logout,username:this.state.username,displayed_form:this.state.displayed_form,handle_login:this.handle_login,handle_signup:this.handle_signup,getItems:this.getSearchQuery,getProfile:this.getSearchProfile,userProfile:this.state.userProfile,handleNavClassChange:this.handleNavClassChange,navClass:this.state.navClass})),r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"/profiles/search",render:function(t){return r.a.createElement(fe,{loggedIn:e.state.loggedIn,handleNavClassChange:e.handleNavClassChange,handleItem:e.handleItem,chatWidget:l,handleChatToggle:e.handleChatToggle,chatShow:n,userProfile:e.state.userProfile})}})),r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"/map",render:function(t){return r.a.createElement(H,{allProfiles:e.state.allProfiles,handleNavClassChange:e.handleNavClassChange})}})),r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/profiles/myprofile",render:function(t){return r.a.createElement(re,{handleItem:e.handleItem,userProfile:e.state.userProfile,loggedIn:e.state.loggedIn,handleNavClassChange:e.handleNavClassChange,getProfileId:e.getProfileId,chatWidget:l,handleChatToggle:e.handleChatToggle,chatShow:n,allProfiles:e.state.allProfiles})}}))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},47:function(e,t,a){},51:function(e,t,a){},55:function(e,t,a){},61:function(e,t,a){},95:function(e,t,a){e.exports=a.p+"static/media/logo.9bcb5913.png"}},[[100,1,2]]]);
//# sourceMappingURL=main.cc128581.chunk.js.map